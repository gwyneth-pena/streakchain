<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm py-2 px-3 px-md-4">
  <div class="container-fluid">
    <a class="navbar-brand d-flex align-items-center gap-2" href="">
      <img src="images/StreakChain.png" alt="StreakChain Logo" />
    </a>

    <button
      class="navbar-toggler border-0"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarNav"
      (click)="isMenuCollapsed.set(false)"
    >
      <i class="ti ti-menu-2 fs-3 text-dark"></i>
    </button>

    <div
      class="navbar-collapse pb-3 pb-lg-0"
      id="navbarNav"
      [class.collapse]="isMenuCollapsed()"
      [class.show]="!isMenuCollapsed()"
    >
      <ul class="navbar-nav ms-auto mt-3 mt-lg-0 gap-2">
        @if (user()?.is_authenticated) {
          <li class="nav-item dropdown d-none d-lg-block">
            <a
              class="nav-link d-flex align-items-center gap-2 fw-medium text-dark"
              role="button"
              data-bs-toggle="dropdown"
            >
              {{ user()?.firstname }} {{ user()?.lastname }}
              <i class="ti ti-chevron-down"></i>
            </a>

            <ul class="dropdown-menu dropdown-menu-end shadow-sm">
              <li>
                <a
                  class="dropdown-item d-flex align-items-center gap-2 pointer"
                  routerLink="/habit-tracker"
                  (click)="isMenuCollapsed.set(true)"
                >
                  <i class="ti ti-chart-dots-2 text-primary"></i>
                  Habit Tracker
                </a>
                <a
                  class="dropdown-item d-flex align-items-center gap-2 pointer"
                  routerLink="/yearly-streaks"
                  (click)="isMenuCollapsed.set(true)"
                >
                  <i class="ti ti-calendar-week-filled text-secondary"></i>
                  Yearly Streaks
                </a>
              </li>
              <li>
                <a class="dropdown-item d-flex align-items-center gap-2 pointer" (click)="logout()">
                  <i class="ti ti-logout text-danger"></i>
                  Logout
                </a>
              </li>
            </ul>
          </li>

          <li class="nav-item d-lg-none">
            <a
              class="d-flex align-items-center pointer text-decoration-none text-secondary"
              routerLink="/habit-tracker"
              (click)="isMenuCollapsed.set(true)"
            >
              <i class="ti ti-chart-dots-2 text-primary me-2"></i>
              Habit Tracker
            </a>
            <a
              class="d-flex align-items-center pointer text-decoration-none text-secondary mt-2"
              routerLink="/yearly-streaks"
              (click)="isMenuCollapsed.set(true)"
            >
              <i class="ti ti-calendar-week-filled text-secondary me-2"></i>
              Yearly Streaks
            </a>
            <a
              class="d-flex align-items-center pointer text-decoration-none text-secondary mt-2"
              (click)="logout()"
            >
              <i class="ti ti-logout text-danger me-2"></i>
              Logout
            </a>
          </li>
        }
        @if (user() === null) {
          <li class="nav-item">
            <button
              class="btn btn-outline-primary w-100"
              routerLink="/login"
              (click)="isMenuCollapsed.set(true)"
            >
              Login
            </button>
          </li>

          <li class="nav-item">
            <button
              class="btn btn-primary w-100"
              routerLink="/signup"
              (click)="isMenuCollapsed.set(true)"
            >
              Create Account
            </button>
          </li>
        }
      </ul>
    </div>
  </div>
</nav>
